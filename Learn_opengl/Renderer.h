#pragma once
#include "Component.h"
#include "Material.h"
#include "Mesh.h"
#include<memory>

//extern std::priority_queue < Renderer*, std::vector<Renderer*>> renderQueue;

class GameObject;
class Renderer :public Component
{
public:
	/// <summary>
	/// 模型Mesh
	/// </summary>
	shared_ptr<Mesh> mesh;

	/// <summary>
	/// 材质
	/// </summary>
	shared_ptr<Material> material;

	Renderer(Mesh*, Material*);
	Renderer();
	~Renderer();

	/// <summary>
	/// 进行渲染
	/// </summary>
	void Render();

	/// <summary>
	/// 被添加时
	/// </summary>
	void Awake() override;

	bool operator>(const Renderer& r)
	{
		return r.material->renderQueueIndex > material->renderQueueIndex;
	}

	// 通过 Component 继承
	virtual TLxml* Serialize() override;

	// 通过 Component 继承
	virtual void Instantiate(TiXmlNode*) override;
};

